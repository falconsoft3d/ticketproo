{% extends "public_base.html" %}
{% load static %}

{% block title %}{{ policy.title }}{% endblock %}

{% block content %}
<div class="container my-5">
    <!-- Encabezado -->
    <div class="text-center mb-5">
        <h1 class="display-4 mb-3">
            <i class="bi bi-shield-check text-primary"></i>
            {{ policy.title }}
        </h1>
        <p class="text-muted">
            <i class="bi bi-calendar"></i> Última actualización: {{ policy.updated_at|date:"d/m/Y" }}
        </p>
    </div>

    <!-- Contenido de la política -->
    <div class="row">
        <div class="col-lg-10 mx-auto">
            <div class="card shadow-sm">
                <div class="card-body p-5">
                    <div class="privacy-content">
                        {{ policy.content|linebreaks }}
                    </div>
                </div>
            </div>

            <!-- Botón de copiar -->
            <div class="text-center mt-4">
                <button class="btn btn-primary btn-lg" onclick="copyContent()">
                    <i class="bi bi-clipboard"></i> Copiar Contenido
                </button>
                <button class="btn btn-outline-secondary btn-lg ms-2" onclick="window.print()">
                    <i class="bi bi-printer"></i> Imprimir
                </button>
            </div>
        </div>
    </div>
</div>

<style>
.privacy-content {
    font-size: 1.1rem;
    line-height: 1.8;
    color: #333;
}

.privacy-content h2,
.privacy-content h3 {
    margin-top: 2rem;
    margin-bottom: 1rem;
    color: #2c3e50;
}

.privacy-content p {
    margin-bottom: 1.5rem;
}

.privacy-content ul,
.privacy-content ol {
    margin-bottom: 1.5rem;
    padding-left: 2rem;
}

.privacy-content li {
    margin-bottom: 0.5rem;
}

@media print {
    .btn {
        display: none;
    }
}
</style>

<script>
function copyContent() {
    const content = document.querySelector('.privacy-content').innerText;
    
    navigator.clipboard.writeText(content).then(function() {
        const btn = event.target.closest('button');
        const originalHTML = btn.innerHTML;
        
        btn.innerHTML = '<i class="bi bi-check-circle"></i> Contenido Copiado';
        btn.classList.remove('btn-primary');
        btn.classList.add('btn-success');
        
        setTimeout(function() {
            btn.innerHTML = originalHTML;
            btn.classList.remove('btn-success');
            btn.classList.add('btn-primary');
        }, 3000);
    }).catch(function(err) {
        alert('No se pudo copiar el contenido. Por favor, selecciona manualmente el texto.');
    });
}
</script>
{% endblock %}
